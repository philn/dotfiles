
export PKG_CONFIG=/usr/bin/pkgconf

export CC=clang
export CXX=clang++
export LDFLAGS=-fuse-ld=mold

export WEBKIT_HOME=$HOME/WebKit

if [ -e /sccache/sccache.toml ]; then
   export SCCACHE_CONF=/sccache/sccache.toml
fi

export WEBKIT_USE_SCCACHE=1
export SCCACHE_NUM_CPUS=45
# New in 0.7.0: Disable, looks a bit buggy.
export SCCACHE_DIRECT=false

# New in 0.9.0: Abstract Unix socket server.
export SCCACHE_SERVER_UDS=\\x00sccache.sock

export NUMBER_OF_PROCESSORS=$(expr $(nproc --all) / 2)

export SCCACHE_REDIS={{ pass "shell/webkit-redis" }}

export PYENV_ROOT="$HOME/.pyenv"
command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

export LSAN_OPTIONS=suppressions=lsan-suppressions.txt

export WPE_BROWSER=cog
export NINJA_STATUS="%w / %W (%f/%t) %P "

if [ -e /run/host/run/dbus/system_bus_socket ]; then
   export DBUS_SYSTEM_BUS_ADDRESS=unix:path=/run/host/run/dbus/system_bus_socket
fi
